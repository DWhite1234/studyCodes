# 1.redis是什么
redis是NoSql数据库,no only sql 是对关系型数据库的补充而不是替代

# 2.redis五种常用数据类型
String:set,get,del
List:LPUSH,LPOP,RPUSH,RPOP,LINDEX
Hash:Hset,hget
Set:sadd,smembers,srem
Zset:基本不用

# 3.redis持久化
RDB:
    1.保存的是数据本身
    2.保存策略
      被动:
        save  900 1
        save  600 10
        save  60  10000

      主动:
        save:会阻塞
        bgsave:不会阻塞
    3.RDB会导致数据丢失,但是恢复数据快,文件较小
    4.shutdown正常退出也会进行持久化    
AOF:
    1.保存的是操作指令
    2.保存策略
      appendfsync   always   --->每一次操作都会被保存,不会丢失数据,安全,但是会影响性能
      appendfsync   everysec --->每秒进行一次保存,极端情况下也只是丢掉1s的数据,对性能也有影响
      appendfsync   no       --->不保存,速度极快,但是不安全
    3.数据恢复慢,文件较大 
    4.AOF重写
        auto-aof-rewrite-percentage 100  文件体积增大100%时执行AOF重写
        auto-aof-rewrite-min-size 64mb   文件体积增长到64mb时执行AOF重写

redis默认优先加载AOF文件 

# 4.事务控制
    1.乐观锁:不对数据加锁
    2.不支持数据回滚

#  5.主从复制
定义:从主节点复制数据到从节点,单向  
目的:实现读写分离,提高集群性能
 主节点:只写
 从节点:只读

原理:
    1.单节点启动默认自身为master节点
    2.集群模式下,指定一台为主节点,剩余为从节点加入集群
    3.配合哨兵模式,实现自动管理,主节点宕机,挑选新的主节点,并且把宕机节点作为从节点加入集群

优势:
    1.主节点专注于写,从节点专注于读,实现读写分离,适用于读多写少的场景
    2.数据同步机制,强化了数据安全,避免了单点故障


# 6.哨兵模式
通过哨兵服务器监控节点,实现集群的自动管理(挑选新的主节点和旧节点的再次加入)

相关概念:
    1.主观下线:一台哨兵认为节点服务器下线
    2.客观下线:多台哨兵认为某节点服务器下线



